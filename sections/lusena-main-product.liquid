{%- liquid
  assign product_form_id = 'LusenaProductForm-' | append: section.id
  assign current_variant = product.selected_or_first_available_variant
  assign price_per_night_cents = current_variant.price | divided_by: 365.0 | round
-%}

<section
  class="lusena-pdp"
  data-lusena-product-section
  style="
    --lusena-section-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
    --lusena-section-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
    --lusena-section-padding-top-desktop: {{ section.settings.padding_top }}px;
    --lusena-section-padding-bottom-desktop: {{ section.settings.padding_bottom }}px;
  "
>
  <script type="application/json" data-lusena-product-json>
    {{ product | json }}
  </script>

  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

  <div class="container">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-12 lg:gap-16">
      {% render 'lusena-pdp-media', product: product, current_variant: current_variant, section: section %}

      <div class="md:col-span-5 space-y-8 sticky top-32 self-start">
        {% render 'lusena-pdp-summary', product: product, current_variant: current_variant, section: section, price_per_night_cents: price_per_night_cents %}

        {% render 'lusena-pdp-variant-picker', product: product, current_variant: current_variant, section: section %}

        {% render 'lusena-pdp-atc', product: product, current_variant: current_variant, section: section, product_form_id: product_form_id %}

        {% render 'lusena-pdp-guarantee', section: section %}

        {% render 'lusena-pdp-accordions', section: section %}
      </div>
    </div>
  </div>

  {% render 'lusena-pdp-cross-sell', section: section %}

  {% render 'lusena-pdp-reviews', section: section %}

  {% render 'lusena-pdp-sticky-atc', product: product, current_variant: current_variant, section: section, product_form_id: product_form_id %}
</section>

{% render 'lusena-pdp-styles' %}

{% render 'lusena-pdp-scripts' %}

{% schema %}
{
  "name": "LUSENA product (draft)",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top (desktop)",
      "min": 0,
      "max": 240,
      "step": 4,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom (desktop)",
      "min": 0,
      "max": 240,
      "step": 4,
      "unit": "px",
      "default": 96
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding top (mobile)",
      "min": 0,
      "max": 240,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Padding bottom (mobile)",
      "min": 0,
      "max": 240,
      "step": 4,
      "unit": "px",
      "default": 48
    },
    {
      "type": "text",
      "id": "emotional_headline",
      "label": "Emotional headline",
      "default": "Wake up without creases."
    },
    {
      "type": "text",
      "id": "reviews_label",
      "label": "Reviews label",
      "default": "127 Reviews"
    },
    {
      "type": "url",
      "id": "reviews_link",
      "label": "Reviews link"
    },
    {
      "type": "text",
      "id": "trust_shipping",
      "label": "Trust: shipping",
      "default": "Free Shipping"
    },
    {
      "type": "text",
      "id": "trust_oeko",
      "label": "Trust: OEKO-TEX",
      "default": "OEKO-TEXÂ®"
    },
    {
      "type": "text",
      "id": "tagline",
      "label": "Tagline",
      "default": "The ultimate anti-aging tool for your skin and hair."
    },
    {
      "type": "text",
      "id": "price_per_night_prefix",
      "label": "Price-per-night prefix",
      "default": "Only "
    },
    {
      "type": "text",
      "id": "price_per_night_suffix",
      "label": "Price-per-night suffix",
      "default": " / night (based on 1 year use)"
    },
    {
      "type": "text",
      "id": "add_to_cart_label",
      "label": "Add to cart label",
      "default": "Add to Cart - Ships Today"
    },
    {
      "type": "text",
      "id": "sticky_add_to_cart_label",
      "label": "Sticky add to cart label",
      "default": "Add to Cart"
    },
    {
      "type": "text",
      "id": "in_stock_label",
      "label": "In-stock label",
      "default": "In stock, ready to ship."
    },
    {
      "type": "text",
      "id": "out_of_stock_label",
      "label": "Out-of-stock label",
      "default": "Out of stock."
    },
    {
      "type": "text",
      "id": "guarantee_heading",
      "label": "Guarantee heading",
      "default": "60-Day Sleep Guarantee"
    },
    {
      "type": "text",
      "id": "guarantee_body",
      "label": "Guarantee body",
      "default": "Try it for 60 nights. If you don't feel the difference, return it for a full refund. No questions asked."
    },
    {
      "type": "text",
      "id": "video_placeholder",
      "label": "Video placeholder",
      "default": "Video Preview"
    },
    {
      "type": "text",
      "id": "cross_sell_heading",
      "label": "Cross-sell heading",
      "default": "Pairs Well With"
    },
    {
      "type": "text",
      "id": "pdp_reviews_heading",
      "label": "PDP reviews heading",
      "default": "Verified Reviews"
    },
    {
      "type": "text",
      "id": "pdp_reviews_button_label",
      "label": "PDP reviews button label",
      "default": "Write a Review"
    },
    {
      "type": "url",
      "id": "pdp_reviews_button_link",
      "label": "PDP reviews button link"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Reduces sleep wrinkles and morning creases"
        }
      ]
    },
    {
      "type": "accordion",
      "name": "Accordion",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Product Details"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<ul><li>100% Mulberry Silk (22 momme)</li><li>Grade 6A fibers</li><li>OEKO-TEXÂ® Standard 100 Certified</li><li>Hidden zipper closure</li></ul>"
        }
      ]
    },
    {
      "type": "cross_sell",
      "name": "Cross-sell product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        }
      ]
    },
    {
      "type": "pdp_review",
      "name": "PDP review",
      "settings": [
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Karolina P."
        },
        {
          "type": "text",
          "id": "quote",
          "label": "Quote",
          "default": "I have acne prone skin and this pillowcase has been a game changer. Less breakouts and my hair is smoother."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "LUSENA product (draft)",
      "blocks": [
        { "type": "benefit" },
        {
          "type": "benefit",
          "settings": {
            "text": "Keeps skin hydrated (doesn't absorb cream)"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Prevents hair breakage and frizz"
          }
        },
        { "type": "accordion" },
        {
          "type": "accordion",
          "settings": {
            "heading": "Care Guide",
            "content": "<p>Machine wash cold on delicate cycle. Use silk-safe detergent. Line dry out of direct sunlight. Do not bleach.</p>"
          }
        },
        {
          "type": "accordion",
          "settings": {
            "heading": "Shipping & Returns",
            "content": "<p>Ships within 24 hours. Free delivery via InPost. Returns accepted within 60 days even if used.</p>"
          }
        },
        {
          "type": "pdp_review",
          "settings": {
            "author": "Karolina P.",
            "quote": "I have acne prone skin and this pillowcase has been a game changer. Less breakouts and my hair is smoother."
          }
        },
        {
          "type": "pdp_review",
          "settings": {
            "author": "Ewa M.",
            "quote": "The cooling effect is real. I sleep so much better and wake up without a puffy face."
          }
        }
      ]
    }
  ]
}
{% endschema %}
