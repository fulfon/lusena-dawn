<section class="relative w-full overflow-hidden lusena-hero" style="--lusena-hero-mobile-max-height: {{ section.settings.mobile_max_height_px }}px;">
  {%- liquid
    assign desktop_image = section.settings.image_desktop
    if desktop_image == blank
      assign desktop_image = section.settings.image
    endif

    assign mobile_image = section.settings.image_mobile
    if mobile_image == blank
      assign mobile_image = desktop_image
    endif

    assign content_position = section.settings.content_position
    if content_position == blank
      assign content_position = 'lower'
    endif

    assign overlay_opacity = section.settings.overlay_opacity | default: 50

    assign content_position_mobile = section.settings.content_position_mobile | default: content_position
    assign content_position_desktop = section.settings.content_position_desktop | default: content_position

    assign content_offset_y = section.settings.content_offset_y | default: 0
    assign content_offset_y_mobile = section.settings.content_offset_y_mobile | default: content_offset_y
    assign content_offset_y_desktop = section.settings.content_offset_y_desktop | default: content_offset_y
  -%}

  <div class="absolute inset-0 h-full w-full z-0" data-lusena-hero-image>
    {%- if mobile_image != blank or desktop_image != blank -%}
      <picture>
        {%- if desktop_image != blank -%}
          <source
            media="(min-width: 768px)"
            sizes="100vw"
            srcset="
              {{ desktop_image | image_url: width: 750 }} 750w,
              {{ desktop_image | image_url: width: 1100 }} 1100w,
              {{ desktop_image | image_url: width: 1500 }} 1500w,
              {{ desktop_image | image_url: width: 2000 }} 2000w,
              {{ desktop_image | image_url: width: 3000 }} 3000w
            "
          >
        {%- endif -%}

        {{
          mobile_image
          | image_url: width: 2000
          | image_tag:
            class: 'h-full w-full object-cover',
            widths: '375, 550, 750, 1100, 1500, 2000',
            sizes: '100vw',
            loading: 'eager',
            fetchpriority: 'high'
        }}
      </picture>
    {%- else -%}
      {{ 'lifestyle-2' | placeholder_svg_tag: 'h-full w-full object-cover bg-surface-2' }}
    {%- endif -%}
  </div>

  <div
    class="absolute inset-0 z-10 pointer-events-none"
    style="background-color: rgb(0 0 0 / {{ overlay_opacity }}%);"
    aria-hidden="true"
  >
    &#8203;
  </div>

  <div
    class="container relative h-full flex flex-col z-20 lusena-hero__content lusena-hero__content--m-{{ content_position_mobile }} lusena-hero__content--d-{{ content_position_desktop }}"
    style="--lusena-hero-content-offset-y-mobile: {{ content_offset_y_mobile }}px; --lusena-hero-content-offset-y-desktop: {{ content_offset_y_desktop }}px;"
  >
    <div class="max-w-xl space-y-6 md:space-y-8 pl-4 md:pl-0 lusena-hero__text" data-lusena-hero-text>
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'heading' -%}
            <h1 class="text-5xl md:text-7xl lg:text-8xl font-serif italic tracking-tight text-white drop-shadow-sm" {{ block.shopify_attributes }}>
              {{ block.settings.heading }}
            </h1>

          {%- when 'subheading' -%}
            {%- if block.settings.text != blank -%}
              <p class="text-lg md:text-xl font-light text-white/95 max-w-md leading-relaxed drop-shadow-sm" {{ block.shopify_attributes }}>
                {{ block.settings.text | escape }}
              </p>
            {%- endif -%}

          {%- when 'buttons' -%}
            <div class="pt-4 flex flex-col sm:flex-row gap-4" {{ block.shopify_attributes }}>
              {%- if block.settings.button_label_1 != blank -%}
                <a
                  {% if block.settings.button_link_1 == blank %}
                    role="link" aria-disabled="true"
                  {% else %}
                    href="{{ block.settings.button_link_1 }}"
                  {% endif %}
                  class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/20 disabled:pointer-events-none disabled:opacity-50 uppercase tracking-widest h-14 px-10 text-base bg-white text-accent-cta hover:bg-white/90 border-none w-full sm:w-auto min-w-[180px]"
                >
                  {{ block.settings.button_label_1 | escape }}
                </a>
              {%- endif -%}

              {%- if block.settings.button_label_2 != blank -%}
                <a
                  {% if block.settings.button_link_2 == blank %}
                    role="link" aria-disabled="true"
                  {% else %}
                    href="{{ block.settings.button_link_2 }}"
                  {% endif %}
                  class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/20 disabled:pointer-events-none disabled:opacity-50 uppercase tracking-widest h-14 px-10 text-base border border-white bg-transparent text-white hover:bg-white/20 hover:text-white w-full sm:w-auto min-w-[160px]"
                >
                  {{ block.settings.button_label_2 | escape }}
                </a>
              {%- endif -%}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% stylesheet %}
  .lusena-hero {
    height: 85vh;
    min-height: 600px;
  }

  @media (max-width: 767px) {
    .lusena-hero {
      min-height: 0;
      height: min(85vh, var(--lusena-hero-mobile-max-height));
    }

    .lusena-hero [data-lusena-hero-image] img {
      object-position: bottom;
    }
  }

  @media (min-width: 768px) {
    .lusena-hero [data-lusena-hero-image] img {
      object-position: center;
    }
  }

  .lusena-hero__content {
    justify-content: center;
    padding-top: 0;
    padding-bottom: 0;
  }

  .lusena-hero__content--m-top {
    justify-content: flex-start;
    padding-top: 7.2rem;
    padding-bottom: 0;
  }

  .lusena-hero__content--m-center {
    justify-content: center;
    padding-top: 0;
    padding-bottom: 0;
  }

  .lusena-hero__content--m-lower {
    justify-content: flex-end;
    padding-top: 0;
    padding-bottom: 7.2rem;
  }

  .lusena-hero__content--m-bottom {
    justify-content: flex-end;
    padding-top: 0;
    padding-bottom: 3.6rem;
  }

  .lusena-hero__text {
    transform: translateY(var(--lusena-hero-content-offset-y-mobile, 0px));
  }

  @media (min-width: 768px) {
    .lusena-hero__content--d-top {
      justify-content: flex-start;
      padding-top: 6rem;
      padding-bottom: 0;
    }

    .lusena-hero__content--d-center {
      justify-content: center;
      padding-top: 0;
      padding-bottom: 0;
    }

    .lusena-hero__content--d-lower {
      justify-content: flex-end;
      padding-top: 0;
      padding-bottom: 10rem;
    }

    .lusena-hero__content--d-bottom {
      justify-content: flex-end;
      padding-top: 0;
      padding-bottom: 5rem;
    }

    .lusena-hero__text {
      transform: translateY(var(--lusena-hero-content-offset-y-desktop, 0px));
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "LUSENA hero (draft)",
  "tag": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Hero image (legacy/fallback)"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Hero image (desktop)"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Hero image (mobile)"
    },
    {
      "type": "range",
      "id": "mobile_max_height_px",
      "min": 320,
      "max": 1200,
      "step": 10,
      "unit": "px",
      "label": "Mobile hero max height",
      "default": 900
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 90,
      "step": 1,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 50
    },
    {
      "type": "header",
      "content": "Text position — mobile"
    },
    {
      "type": "radio",
      "id": "content_position_mobile",
      "label": "Text vertical position (mobile)",
      "default": "lower",
      "options": [
        { "value": "top", "label": "Top" },
        { "value": "center", "label": "Center" },
        { "value": "lower", "label": "Lower" },
        { "value": "bottom", "label": "Bottom" }
      ]
    },
    {
      "type": "range",
      "id": "content_offset_y_mobile",
      "min": -120,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Text fine-tune (Y offset) (mobile)",
      "default": 0
    },
    {
      "type": "header",
      "content": "Text position — desktop"
    },
    {
      "type": "radio",
      "id": "content_position_desktop",
      "label": "Text vertical position (desktop)",
      "default": "lower",
      "options": [
        { "value": "top", "label": "Top" },
        { "value": "center", "label": "Center" },
        { "value": "lower", "label": "Lower" },
        { "value": "bottom", "label": "Bottom" }
      ]
    },
    {
      "type": "range",
      "id": "content_offset_y_desktop",
      "min": -120,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Text fine-tune (Y offset) (desktop)",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "heading",
          "label": "Heading",
          "default": "<p>Beauty Happens<br>at Night.</p>"
        }
      ]
    },
    {
      "type": "subheading",
      "name": "Subheading",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Obudź się piękniejsza. Jedwab 22 momme z Suzhou, który chroni Twoją skórę przez całą noc."
        }
      ]
    },
    {
      "type": "buttons",
      "name": "Buttons",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_label_1",
          "label": "Primary button label",
          "default": "Shop Pillowcases"
        },
        {
          "type": "url",
          "id": "button_link_1",
          "label": "Primary button link"
        },
        {
          "type": "text",
          "id": "button_label_2",
          "label": "Secondary button label",
          "default": "Why Silk?"
        },
        {
          "type": "url",
          "id": "button_link_2",
          "label": "Secondary button link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "LUSENA hero (draft)",
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "subheading"
        },
        {
          "type": "buttons",
          "settings": {
            "button_link_1": "shopify://collections/all",
            "button_link_2": "shopify://pages/nasza-jakosc"
          }
        }
      ]
    }
  ]
}
{% endschema %}
