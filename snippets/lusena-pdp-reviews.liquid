{% doc %}
  PDP reviews grid (from section blocks).

  @param {section} section
{% enddoc %}

  {%- assign reviews_count = 0 -%}
  {%- for block in section.blocks -%}
    {%- if block.type == 'pdp_review' -%}
      {%- assign reviews_count = reviews_count | plus: 1 -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if reviews_count > 0 -%}
    <div class="mt-24 border-t border-brand-bg pt-24 bg-surface-1 w-full">
      <div class="container pb-24">
        <div class="flex items-center justify-between mb-12{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
          <h2 class="text-2xl md:text-3xl font-serif text-primary">{{ section.settings.pdp_reviews_heading | escape }}</h2>
          {%- if section.settings.pdp_reviews_button_label != blank and section.settings.pdp_reviews_button_link != blank -%}
            <a
              href="{{ section.settings.pdp_reviews_button_link }}"
              class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/20 disabled:pointer-events-none disabled:opacity-50 uppercase tracking-widest h-12 px-8 py-3 border border-primary bg-transparent text-primary hover:bg-surface-2"
            >
              {{ section.settings.pdp_reviews_button_label | escape }}
            </a>
          {%- endif -%}
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          {%- for block in section.blocks -%}
            {%- if block.type == 'pdp_review' -%}
              <div
                class="bg-white p-8 space-y-4{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                {% if settings.animations_reveal_on_scroll %}
                  data-cascade
                {% endif %}
                {{ block.shopify_attributes }}
              >
                <div class="flex gap-1 text-accent-gold" aria-hidden="true">
                  {%- for i in (1..5) -%}
                    {% render 'lusena-icon', name: 'star', class: 'w-4 h-4 fill-current', stroke_width: 1.5 %}
                  {%- endfor -%}
                </div>
                <blockquote class="font-serif text-lg leading-relaxed text-primary">
                  "{{ block.settings.quote | escape }}"
                </blockquote>
                <div class="text-xs font-medium tracking-widest uppercase text-secondary">
                  â€” {{ block.settings.author | escape }}
                </div>
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  {%- endif -%}
