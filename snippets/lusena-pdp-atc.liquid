{% doc %}
  PDP add-to-cart actions + stock messaging.

  @param {product} product
  @param {variant} current_variant
  @param {section} section
  @param {string} product_form_id
{% enddoc %}

        <div class="space-y-2 md:space-y-3{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
          <product-form class="product-form" data-hide-errors="true">
            {%- form 'product',
              product,
              id: product_form_id,
              class: 'form',
              novalidate: 'novalidate',
              data-type: 'add-to-cart-form',
              data-loading-min-ms: '500',
              data-loading-hold-ms: '350'
            -%}
              <input type="hidden" name="id" value="{{ current_variant.id }}" data-lusena-variant-id>
              <button
                id="main-cta"
                type="submit"
                data-lusena-atc
                class="lusena-btn lusena-btn--primary lusena-btn--size-pdp lusena-btn--text-base lusena-btn--full-width"
                {% unless current_variant.available %}disabled{% endunless %}
              >
                <span class="lusena-btn__content" data-lusena-add-to-cart-text>{{ section.settings.add_to_cart_label | escape }}</span>
                <span class="sold-out-message hidden">{{ 'products.product.sold_out' | t }}</span>
                <span
                  class="loading__spinner hidden"
                >
                  <span class="lusena-btn__loading-text">{{ section.settings.add_to_cart_loading_label | escape }}</span>
                </span>
              </button>

                <button
                  type="button"
                  data-lusena-buy-now
                  class="lusena-btn lusena-btn--outline lusena-btn--size-pdp lusena-btn--text-sm lusena-btn--full-width mt-2"
                {% unless current_variant.available %}disabled{% endunless %}
              >
                <span class="lusena-btn__content">{{ section.settings.buy_now_label | escape }}</span>
                <span
                  class="loading__spinner hidden"
                >
                  <span class="lusena-btn__loading-text">{{ section.settings.buy_now_loading_label | escape }}</span>
                </span>
              </button>
            {%- endform -%}
          </product-form>

          <div class="flex items-center justify-center gap-2 text-xs text-secondary" data-lusena-stock>
            <span class="w-2 h-2 rounded-full lusena-pdp__stock-dot lusena-pdp__stock-dot--available" data-lusena-stock-dot></span>
            <span
              data-lusena-stock-text
              data-in-stock="{{ section.settings.in_stock_label | escape }}"
              data-out-of-stock="{{ section.settings.out_of_stock_label | escape }}"
            >
              {%- if current_variant.available -%}
                {{ section.settings.in_stock_label | escape }}
              {%- else -%}
                {{ section.settings.out_of_stock_label | escape }}
              {%- endif -%}
            </span>
          </div>
        </div>
